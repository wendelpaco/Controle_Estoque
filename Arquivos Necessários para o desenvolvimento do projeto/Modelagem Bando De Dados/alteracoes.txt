
CREATE TABLE [USUARIO]
( 
	[COD_USUARIO]           		INT  NOT NULL  IDENTITY ( 1,1 ) ,
	[NME_USUARIO]          			VARCHAR(95) NOT NULL ,
	[NME_LOGIN]				VARCHAR(95) NOT NULL ,
	[SENHA]					VARCHAR(95) NOT NULL,
	[EMAIL]					VARCHAR(95) NOT NULL,
	[FLG_ATIVO]				INT NOT NULL,
	[COD_PERFIL]				INT NOT NULL
)
GO

ALTER TABLE [USUARIO]
	ADD CONSTRAINT [R_18] FOREIGN KEY ([COD_PERFIL]) REFERENCES [PERFIL]([COD_PERFIL])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION
GO

CREATE TABLE [PERFIL]
( 
	[COD_PERFIL]            INT  NOT NULL  IDENTITY ( 1,1 ) ,
	[NME_PERFIL]           VARCHAR(95) NOT NULL,
	[FLG_ATIVO]           INT NULL
)
GO
ALTER TABLE [PERFIL]
	ADD CONSTRAINT [XPKPERFIL] PRIMARY KEY  NONCLUSTERED ([COD_PERFIL] ASC)
GO

ALTER TABLE PRODUTO 
ADD COD_USUARIO INT NULL

ALTER TABLE [PRODUTO]
	ADD CONSTRAINT [R_8] FOREIGN KEY ([COD_USUARIO]) REFERENCES [USUARIO]([COD_USUARIO])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION


ALTER TABLE COMPRA 
ADD COD_USUARIO INT NULL

ALTER TABLE [COMPRA]
	ADD CONSTRAINT [R_7] FOREIGN KEY ([COD_USUARIO]) REFERENCES [USUARIO]([COD_USUARIO])
		ON DELETE NO ACTION
		ON UPDATE NO ACTION


INSERT INTO PERFIL (NME_PERFIL, FLG_ATIVO) VALUES ('ADMINISTRADOR',1);
INSERT INTO USUARIO (NME_USUARIO, NME_LOGIN, SENHA, EMAIL, FLG_ATIVO, COD_PERFIL) VALUES ('ADMINISTRADOR','ADM','202cb962ac59075b964b07152d234b70','wendelpaco@live.com',1,1);

